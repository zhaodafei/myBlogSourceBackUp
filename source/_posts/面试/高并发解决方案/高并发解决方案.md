---
title: -高并发解决方案
---

QPS达到800 方案: CDN加速、负载均衡

QPS达到1000 方案: 静态HTML 缓存

QPS达到2000 方案:做业务分离、分布式存储  (这个时候文件访问锁都成为灾难)

### 方案处理

1. 流量化: 防盗链处理
2. 前端优化: 减少HTTP请求、添加一异步请求、启用浏览器缓存和文件压缩、CDN加速、简历独立图片服务器
3. 服务端优化:页面静态化、并发处理
4. 数据库优化: 数据库缓存、分库分表、分区操作、读写分离、负载均衡
5. Web服务器优化:负载均衡

#### 流量化 --- 防盗链实现方法: 
```
nginx利用Referer头、nginx的nginx_http_accesskey_module 模块
```

#### 前端优化 --- 减少HTTP请求

```
HTTP连接产生的开销
域名解析-->TCP连接-->发送请求-->等待-->下载资源-->解析时间

减少HTTP请求的方法
1) 图片地图: (简单理解为一个图片上有多个链接)
2) CSS精灵: (简单理解为,用css控制图片位置)
3) 合并 js 和 css 脚本
4) 图片使用 Base64编码减少页面请求
  	
```

#### 线程进程

```
单进程单线程: 一个人在一张桌子上吃饭
单进程多线程: 多个人在同一张桌子上一起吃饭
多进程单线程: 多个人在每个人自己的桌子上吃饭
```

#### 











