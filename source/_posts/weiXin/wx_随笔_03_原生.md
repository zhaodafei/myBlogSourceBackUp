---
title: 微信开发常见问题01
date: 2023-10-10
categories: 
- 微信
tags:
- 微信
---
微信开发常见问题01
微信开发常见问题01
微信开发常见问题01

<!-- more -->

### 屏幕选择

```wiki
建议： 开发微信小程序时设计师可以用 iPhone6 作为视觉稿的标准。
注意： 在较小的屏幕上不可避免的会有一些毛刺，请在开发时尽量避免这种情况。

iPhone6:	1rpx = 0.5px	1px = 2rpx
```

```html
<view>
  <view> 尺寸参考标准 </view>
  <view style="width: 750rpx; border: 1px solid red; color: red">
    <view style="width: 375px; border: 1px solid blue">标准尺寸</view>
  </view>

  <view style="width: 740rpx; border: 1px solid red; margin-top: 30px; color: blue">
    <view style="width: 360px; border: 1px solid blue"> 调试尺寸</view>
  </view>
</view>
```



[官方: 尺寸单位](https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html)

### 分享

微信原生分享功能

> 1. 在小程序页面中，定义 `onShareAppMessage` 方法：
>
>    ```js
>    Page({
>      onShareAppMessage: function (options) {
>        return {
>          title: '自定义分享标题',
>          path: '/pages/index/index',
>          imageUrl: 'https://cdn.uviewui.com/uview/swiper/1.jpg', // 分享图
>        }
>      },
>    })
>    ```
>
>    
>
> 2. 在页面上添加按钮
>    ```html
>    <button open-type="share">分享</button>
>    ```
>
>    
>
> 3. xxx

[分享官网 onShareAppMessage](https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onShareAppMessage-Object-object)

### 官方示例项目

微信官方示例代码导入到本地后路径`C:\Users\fei\WeChatProjects` 和 `minicode-1`

### 自定义`tabBar`

```wiki
#自定义步骤
01)miniprogram/app.json 中 "custom": true,
02)组件 custom-tab-bar 
02-2) 注意点: custom-tab-bar 中的配置要和 app.json 中保持一致
```

1. [官网: 自定义 tabBar](https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html)
2. [官网回复: 暂时无更优解决方案](https://developers.weixin.qq.com/community/develop/doc/000c84de0cc590bbe54b97edf5e414?_at=1733131334703)

### 国际化`i18n`

```wiki
internationalization: 国际化
i18n = internationalization

i18n之所以叫i18n是因为次单词长度为20，以i开头以n结束，i和n之间间隔18位。
```

### 路由-页面跳转

```wiki
!!!路由跳转注意别超过层级
wx.navigateTo() 这个方法页面栈最多10层,超过10层后要特殊处理
01)第一种: 合理使用使用 wx.redirectTo()、wx.reLaunch()、wx.switchTab()
02)第二种: 判断当前层级: let pages = getCurrentPages(); 可以获取当前层级数量,然后判断超过后处理

```

[官网: 路由](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.switchTab.html)

### 顶部距离相关数据

```js
// 01)获取菜单按钮（右上角胶囊按钮）的布局位置信息
const menuInfo = wx.getMenuButtonBoundingClientRect()

// 02)获取窗口信息
const windowInfo = wx.getWindowInfo()
windowInfo.statusBarHeight; // 状态栏的高度，单位px

```

```js
const windowInfo = wx.getWindowInfo() // 窗口信息
const statusBarHeight = windowInfo.statusBarHeight // 状态栏的高度
const menuInfo = wx.getMenuButtonBoundingClientRect() // 菜单按钮信息
// 顶部bar高度 =  状态栏高度 + 胶囊高度 + 胶囊上下空隙
const barHeight = statusBarHeight + menuInfo.height + (menuInfo.top - statusBarHeight) * 2

```

![小程序顶部距离](/img/vue/wx/wx_01.jpg "小程序顶部距离")

```js
const windowInfo = wx.getWindowInfo() // 窗口信息
const screenWidth = windowInfo.screenWidth // 屏幕宽度
const info = wx.getMenuButtonBoundingClientRect() // 菜单按钮信息
const navigationBar = {
   // 菜单宽度加上左右空白
   leftWidth: info.width  + (screenWidth - info.right) * 2,
   // centerWidth: 0, // 自动
   rightWidth: info.width + (screenWidth - info.right) * 2
}

```

![小程序标题中间文字宽度](/img/vue/wx/wx_02.jpg "小程序标题中间文字宽度")

1. [官网: 菜单按钮](https://developers.weixin.qq.com/miniprogram/dev/api/ui/menu/wx.getMenuButtonBoundingClientRect.html)

### 背景图与js

背景图如果用`js`加载出来的,这时候`background` 会覆盖`css`中的属性`background-repeat`

```html
<!-- 背景图如果用js加载出来的,这时候background 会覆盖css中的属性background-repeat, background-size-->

<view
  class="search background"
  style="height:{{barHeight}};background:url({{logoBg01}}); background-size: 100% {{barHeight}}"
>
</view>

<script>
    const logoBg01 = "https://interactive-examples.mdn.mozilla.net/media/examples/hand.jpg";
    const barHeight = '380px'
</script>

<style>
.search.background {
  width: 100%;
  position: fixed;
  left: 0;
  top: 0;
  /*background-size: 100% 380rpx;*/
  background-repeat: no-repeat !important;
  /*background: url('https://interactive-examples.mdn.mozilla.net/media/examples/hand.jpg');*/
}
</style>
```



### 底部

1. [官网: 基本语法](https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/)
2. xxxx























